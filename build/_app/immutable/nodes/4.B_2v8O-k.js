import{Q as Z,i as B,R as O,M as c,S as Q,C as Y,d as r,T as D,N as d,a as m,e as i,O as N,c as P,$ as R,b as M,o as L}from"../chunks/disclose-version.Z7qVP8c8.js";import{p as $,a as T,g as u,h as F}from"../chunks/runtime.DnRKx-fn.js";import{o as W,i as I}from"../chunks/main-client.cYVvfyju.js";import{u as H,a as V,s as E}from"../chunks/store.DDDdHSnf.js";import{c as G,S,B as J,P as A,L as X,a as K}from"../chunks/Piechart.L7EHjKUa.js";import{m as x}from"../chunks/Mapchoice.svelte_svelte_type_style_lang.ukNUpOOc.js";import{w as U}from"../chunks/index.Dfv-Md-h.js";var ee=i('<blockquote scrolly-container=""> </blockquote>'),te=i('<div><div id="map" class="svelte-ycgrd1"></div> <button class="reset-button svelte-ycgrd1">Reset Map</button> <!></div>');function oe(_,k){T(k,!1),x.accessToken="pk.eyJ1Ijoic2VqYWxnIiwiYSI6ImNsdmN0Y21yZTBubmgydmxmNDlmbHVuMXAifQ.G5QWdSQskLQRC0Dw0nYLVw";let t;var o=Y(null),f=Z(k,"zipcode",4,null);const q=[-71.0589,42.3601],y=11;W(async()=>{t=new x.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:q,zoom:y});const v="boston-cambridge-zip-codes.geojson",e=await G("lat_long_address.csv");t.on("load",async function(){t.addSource("zip-codes",{type:"geojson",data:v}),t.addLayer({id:"polygons",type:"fill",source:"zip-codes",paint:{"fill-color":["case",["boolean",["feature-state","clicked"],!1],"#949494","#d3d3d3"],"fill-opacity":.8,"fill-outline-color":"#000000"}});const n={type:"FeatureCollection",features:e.map(s=>({type:"Feature",properties:{zipcode:s["ZIPCODE post (group)"]},geometry:{type:"Point",coordinates:[parseFloat(s.Longitude),parseFloat(s.Latitude)]}}))};t.addSource("locations",{type:"geojson",data:n}),t.addLayer({id:"points",type:"circle",source:"locations",paint:{"circle-radius":6,"circle-color":"#000000","circle-opacity":.4},filter:["==",["get","zipcode"],""]}),t.on("click","polygons",s=>{let p=s.features[0],a=p.id;u(o)!==null&&u(o)!==a&&t.setFeatureState({source:"zip-codes",id:u(o)},{clicked:!1}),t.setFeatureState({source:"zip-codes",id:a},{clicked:!0}),F(o,a),f("0"+u(o).toString()),t.setFilter("points",["==",["get","zipcode"],f()]);const g=new x.LngLatBounds;p.geometry.coordinates[0].forEach(l=>{g.extend(l)}),t.fitBounds(g,{padding:20})})})});function h(){t.setCenter(q),t.setZoom(y),u(o)!==null&&t.setFeatureState({source:"zip-codes",id:u(o)},{clicked:!1}),t.setFilter("points",["==",["get","zipcode"],""]),F(o,null),f(null)}B();var b=d(_,!0,te),C=m(b),z=r(r(C,!0)),j=r(r(z,!0));O("click",z,h,!1),I(j,()=>u(o)===null,v=>{},v=>{var e=d(v,!0,ee),n=m(e);Q(n,()=>`You selected ${D("0"+u(o))}! Click Reset Map to choose a new zip code.`),c(v,e)}),c(_,b),$()}var se=i('<p class="test svelte-11jnsqs">Section 1: How Old are Condos that are Most Likely to be Converted?</p>'),ae=i('<div class="scrolly-container svelte-11jnsqs"><!></div>'),re=i('<p class="test-pie svelte-11jnsqs">Section 2: What Types of Buildings are Most Likely to be Converted?</p>'),ie=i('<div class="pie-container svelte-11jnsqs"><!></div>'),ne=i("<h1>Condo Complaints</h1> <blockquote>For Cambridge, we did not have data on condominium complaints.</blockquote>",!0),le=i('<p class="test svelte-11jnsqs">Section 3: How do Complaints about Condominiums vary over Time?</p>'),ce=i('<div class="scrolly-container svelte-11jnsqs"><!></div>'),de=i('<p class="test svelte-11jnsqs">Section 4: What Types of Complaints are Most Common?</p>'),pe=i('<div class="scrolly-container svelte-11jnsqs"><!></div>'),ue=i("<!> <!>",!0),ve=i('<blockquote>Through our interactive visualization, we invite you to explore the impact of condo conversions on your community.<br> <newline></newline> On the map, click a Boston or Cambridge zip code to see the locations of condo conversions (starting from 2015) in the region:</blockquote> <div class="parent-container svelte-11jnsqs"><!> <!> <!></div> <!>',!0);function ke(_,k){T(k,!1);const t={};H(t);const o=()=>E(f,"$zipcode",t);let f=U("");const q=["02140","02139","02142","02141","02138"];B();var y=L(_,!0,ve);N(e=>{R.title="Condo Conversions in Greater Boston "});var h=M(y),b=r(r(h,!0)),C=m(b),z=r(r(C,!0)),j=r(r(z,!0)),v=r(r(b,!0));oe(C,{get zipcode(){return o()},set zipcode(e){V(f,e)}}),S(z,{children:(e,n)=>{var s=d(e,!0,se);c(e,s)},$$slots:{viz:(e,n)=>{var s=d(e,!0,ae),p=m(s);J(p,{get query(){return o()}}),c(e,s)}}}),S(j,{children:(e,n)=>{var s=d(e,!0,re);c(e,s)},$$slots:{viz:(e,n)=>{var s=d(e,!0,ie),p=m(s);A(p,{get query(){return o()}}),c(e,s)}}}),I(v,()=>o()!==""&&q.indexOf(o())!==-1,e=>{var n=L(e,!0,ne);P(e,n)},e=>{var n=L(e,!0,ue),s=M(n),p=r(r(s,!0));S(s,{children:(a,g)=>{var l=d(a,!0,le);c(a,l)},$$slots:{viz:(a,g)=>{var l=d(a,!0,ce),w=m(l);X(w,{get query(){return o()}}),c(a,l)}}}),S(p,{children:(a,g)=>{var l=d(a,!0,de);c(a,l)},$$slots:{viz:(a,g)=>{var l=d(a,!0,pe),w=m(l);K(w,{get query(){return o()}}),c(a,l)}}}),P(e,n)}),P(_,y),$()}export{ke as component};
